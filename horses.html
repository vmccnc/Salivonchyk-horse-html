<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content="List of horses for sale" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Horse Farm - Horses for Sale</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <nav>
      <div class="logo">HorseFarm</div>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="horses.html" class="active">Horses</a></li>
        <li><a href="news.html">News</a></li>
        <li><a href="about.html">About Us</a></li>
        <li><a href="contact.html">Contact Us</a></li>
        <li><a href="purchase.html">Покупка коней</a></li>
      </ul>
    </nav>
  </header>
  
  <main>
    <h1>Лошади, выставленные на продажу</h1>
    <div id="horses-container">
      <!-- Horse cards will be dynamically generated here -->
    </div>
  </main>

  <footer>
    <p>&copy; 2025 HorseFarm. All rights reserved.</p>
  </footer>

  <script>
    // Fetch horses with status FOR_BUY from the backend API
    fetch('http://localhost:8090/api/horses/for-buy')
      .then(response => response.json())
      .then(horses => {
        const container = document.getElementById('horses-container');
        horses.forEach(horse => {
          const card = document.createElement('div');
          card.classList.add('horse-card');
          card.innerHTML = `
            <h2>${horse.name}</h2>
            <p>Год рождения: ${horse.yearOfBirth}</p>
            <p>Порода: ${horse.breed}</p>
            <p>Описание: ${horse.description}</p>
            <p>Цена: $${horse.price}</p>
            <p>Статус: ${horse.status}</p>
            <button onclick="buyHorse(${horse.id})">Купить часть лошади</button>
          `;
          container.appendChild(card);
        });
      })
      .catch(err => console.error(err));

    // Example function for buying a horse (opens a modal, etc.)
    function buyHorse(horseId) {
      // Open a modal to input buyer details and then call the /api/horses/{id}/buy endpoint
      // (Implementation similar to the previous purchase.js code.)
      alert('Здесь будет модальное окно для покупки. Horse ID: ' + horseId);
    }
  </script>
</body>
</html>
